{"version":3,"sources":["./src/app/components/pages/home/home-routing.module.ts","./src/app/components/pages/home/home.module.ts","./src/app/components/pages/home/home.component.ts","./src/app/components/pages/home/home.component.html"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyC;AACc;AAEN;;;AAEjD,MAAM,MAAM,GAAW,CAAC,EAAC,IAAI,EAAE,EAAE,EAAE,SAAS,EAAE,6DAAa,EAAC,CAAC,CAAC;AAMvD,MAAM,iBAAiB;;gGAAjB,iBAAiB;4JAAjB,iBAAiB,kBAHnB,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,EAC9B,4DAAY;mIAEX,iBAAiB,uFAFlB,4DAAY;6FAEX,iBAAiB;cAJ7B,sDAAQ;eAAC;gBACR,OAAO,EAAE,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;gBACxC,OAAO,EAAE,CAAC,4DAAY,CAAC;aACxB;;;;;;;;;;;;;;ACVD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyC;AACM;AAEW;AACT;AAEO;;AAmBjD,MAAM,UAAU;;yFAAV,UAAU;8IAAV,UAAU,kBAZZ;YACP,4DAAY;YACZ,sEAAiB;YACjB,+DAAc;SAOf;mIAEU,UAAU,mBAdN,6DAAa,aAG1B,4DAAY;QACZ,sEAAiB;QACjB,+DAAc;6FASL,UAAU;cAftB,sDAAQ;eAAC;gBACR,YAAY,EAAE,CAAC,6DAAa;iBAC3B;gBACD,OAAO,EAAE;oBACP,4DAAY;oBACZ,sEAAiB;oBACjB,+DAAc;iBAOf;aACF;;;;;;;;;;;;;;ACxBD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyD;AAGE;AACe;AACV;AACM;AAE7B;AAG0C;;;;;;;;;;;;;;ICyD1E,sEAEG;IAAA,6EAA+D;IAArD,4aAA6B;IAAwB,iFAAiB;IAAA,4DAAS;IAE7F,4DAAM;;;;IAOX,sEAEK;IAAA,oEACI;IAAA,2EACI;IAD4B,ubAAiC;IAC7D,oEACJ;IAAA,4DAAO;IAGb,4DAAI;IAED,4DAAM;;;IAbX,sEAGD;IAAA,iIAUY;IAEX,4DAAM;;;;IAZD,0DAAuC;IAAvC,0GAAuC;;;IAhE5C,8EAMI;IAAA,8EAGJ;IAAA,kFAOQ;IAAA,uDAYJ;IAAA,4DAAmB;IAKnB,0EAEA;IAAA,oEACA;IAAA,mFACC;IAAA,oEAEG;IAAA,uDACH;IAAA,4DAAI;IAIJ,uEAEG;IAAA,wDAGH;IAAA,4DAAI;IAIJ,4HAIK;IAIV,6HAeM;IAQD,2EASD;IAAA,4DAAmB;IAAA,mEAEvB;IAAA,4DAAW;IACP,0EAA2B;IAI/B,4DAAW;;;;IApFH,0DAYJ;IAZI,oGAYJ;IAOsB,0DAAqB;IAArB,8IAAqB;IAIvC,0DACH;IADG,6FACH;IAMG,0DAGH;IAHG,4FAGH;IAIM,0DAAW;IAAX,8EAAW;IAQI,0DAAY;IAAZ,qFAAY;;;IAtE1C,yEASI;IAAA,0HAoGW;IAGX,4DAAM;;;IAvG2C,0DAAW;IAAX,gFAAW;;;IA2G5D,0EAEI;IAAA,yEAA2B;IAC/B,4DAAM;;ADvGH,MAAM,aAAa;IAyBxB,YAAoB,OAAuB,EACjC,UAA0B,EAC1B,OAAoB,EACpB,MAAc,EAAS,SAA0B,EACjD,SAA+B;QAJrB,YAAO,GAAP,OAAO,CAAgB;QACjC,eAAU,GAAV,UAAU,CAAgB;QAC1B,YAAO,GAAP,OAAO,CAAa;QACpB,WAAM,GAAN,MAAM,CAAQ;QAAS,cAAS,GAAT,SAAS,CAAiB;QACjD,cAAS,GAAT,SAAS,CAAsB;QA3B3C,UAAK,GAAa,KAAK,CAAC;QAGjB,aAAQ,GAAW,CAAC,CAAC;QAErB,WAAM,GAAa,EAAE,CAAC;QAE3B,aAAQ,GAAG,EAAE,CAAC;QACd,SAAI,GAAW,CAAC,CAAC;QAIlB,gBAAW,GAAW,CAAC,CAAC;QAGvB,YAAO,GAAa,EAAE,CAAC;QACvB,qBAAgB,GAAW,CAAC,CAAC;QAC7B,mBAAc,GAAa,EAAE,CAAC;QAC/B,cAAS,GAAa,EAAE,CAAC;QACxB,uBAAkB,GAAW,CAAC,CAAC;QACjC,OAAE,GAAG,EAAE,CAAC;QAER,aAAQ,GAAW,KAAK,CAAC;QAWjB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;QAE5C,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC,QAAQ,EAAE,CAAC;QAGnC,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC,aAAa,EAAE,CAAC;IAUlD,CAAC;IAKC,QAAQ;QAIT,IAAI,CAAC,UAAU,EAAE,CAAC;QAEnB,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,EAAC,GAAG,CAAC,CAAC,CAAC;QACtE,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC,CAAC;QAC1D,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC,CAAC;QAE9D,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;QAGlB,IAAI,CAAC,oBAAoB,EAAE,CAAC;IAC1B,CAAC;IAQA,UAAU,CAAC,OAAgB;QAG1B,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;IACxC,CAAC;IAED,oBAAoB;QAElB,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;QAEf,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE;YAExC,IAAG,IAAI,EAAC;gBACR,MAAM,IAAI,GAAG,YAAY,IAAI,CAAC,GAAG,UAAU,CAAC;gBAC5C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;gBAGjD,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE;oBAGjC,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,OAAO,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;wBAGjD,KAAK,IAAI,MAAM,GAAG,CAAC,EAAE,MAAM,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,MAAM,EAAE,MAAM,EAAE,EAAE;4BAEvE,MAAM,MAAM,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,QAAQ,CAAC,aAAa,CAAC;4BAEtE,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;yBAIrB;qBAEV;oBAGD,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;wBAEvD,KAAK,IAAI,MAAM,GAAG,CAAC,GAAC,KAAK,EAAE,MAAM,IAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,MAAM,EAAE,EAAE;4BAEhE,IAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAC;gCAE3C,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC;6BAC1B;yBACF;qBAGA;oBAIH,IAAI,CAAC,MAAM,CAAC,IAAI,CAAE,QAAQ,CAAC,EAAE;wBAE3B,IAAG,QAAQ,IAAI,EAAE,EAAC;4BAEhB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;yBAM/B;oBACH,CAAC,CAAC,CAAC;gBAOL,CAAC,CAAC,CAAC;aAEA;QACL,CAAC,CAAC,CAAC;IAEH,CAAC;IACD,cAAc,CAAC,QAAiB;QAE9B,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;IAGtC,CAAC;IAOE,UAAU;QAIT,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE;YAIxC,IAAG,IAAI,IAAI,IAAI,EAAC;gBAEhB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;gBAEnB,OAAO;aAGN;iBAAI;gBACH,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;aAC9B;QAEH,CAAC,CAAC,CAAC;IAEL,CAAC;IAGD,aAAa,CAAC,EAAU;QAGtB,MAAM,IAAI,GAAG,UAAU,CAAC;QAExB,IAAI,CAAC,SAAS,CAAC,MAAM,CAAO,IAAI,EAAE,EAAE,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE;YAEnD,IAAG,IAAI,EAAC;gBAER,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;aAGjB;iBAAI;gBAEH,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;aAEpB;QAKH,CAAC,CAAC,CAAC;IAIH,CAAC;IAID,eAAe,CAAC,EAAU;QAGxB,MAAM,IAAI,GAAG,eAAe,CAAC;QAC7B,IAAI,CAAC,SAAS,CAAC,MAAM,CAAe,IAAI,EAAC,EAAE,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE;YAEhE,IAAG,EAAE,IAAI,MAAM,CAAC,EAAE,EAAE;gBAEpB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;aAGjB;iBAAI;gBAEH,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;aAEpB;QAED,CAAC,CAAC,CAAC;IAOL,CAAC;;0EAlPM,aAAa;6FAAb,aAAa;QCpBzB,gEAED;QAAA,8EAEA;QAAA,yGAgHU;;QAEV,4DAAW;QACP,qMAOc;;;QA1HM,0DAAyB;QAAzB,gJAAyB;;6FDgBpC,aAAa;cALzB,uDAAS;eAAC;gBACT,QAAQ,EAAE,UAAU;gBACpB,WAAW,EAAE,uBAAuB;gBACpC,SAAS,EAAE,CAAC,uBAAuB,CAAC;aACrC","file":"components-pages-home-home-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { HomeComponent } from './home.component';\n\nconst routes: Routes = [{path: '', component: HomeComponent}];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class HomeRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { HomeRoutingModule } from './home-routing.module';\nimport { HomeComponent } from './home.component';\n\nimport {MaterialModule} from '../../../material.module';\nimport { from } from 'rxjs';\n\n\n@NgModule({\n  declarations: [HomeComponent,\n  ],\n  imports: [\n    CommonModule,\n    HomeRoutingModule,\n    MaterialModule,\n   \n    \n\n    \n    \n   \n  ]\n})\nexport class HomeModule { }\n","import { Component, Input, OnInit } from '@angular/core';\nimport { from, observable, Observable } from 'rxjs';\nimport { Product } from 'src/app/shared/models/product.interface';\nimport {ProductService} from '../../posts/product.service';\nimport {AuthCrudService} from '../../../shared/services/authCrud.service';\nimport { AuthService } from '@app/components/auth/auth.service';\nimport { CarritoService } from '@app/shared/services/carrito.service';\nimport { Pedido, ProductoPedido } from '@app/shared/models/pedido';\nimport { Router } from '@angular/router';\nimport { Vendedor } from '@app/shared/models/vendedor';\nimport { FilterProductPipe } from '../../../pipe/filter-product.pipe';\nimport { ComentProductService } from '@app/shared/services/coment-product.service';\nimport { User } from '@app/shared/models/user.interface';\nimport { tick } from '@angular/core/testing';\nimport { Domiciliario } from '@app/shared/models/domiciliario';\n\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.scss']\n})\nexport class HomeComponent implements OnInit {\n\nadmin:  boolean = false;\n\nproducto: any;\npublic contador: number = 0;\n\npublic vector: string[] = [];\n\n  selected = '';\n  posi: number = 0;\n  products$: Observable<Product[]>;\n\n  private product$: Observable<Pedido[]>\n porcentajeC: number = 0;\n  users$: Observable<User[]>;\n  pedidos$: Observable<Pedido[]>;\n  product: string[] = [];\n  pedidoCalificado: number = 0;\n  calificaciones: number[] = [];\n productos: string[] = [];\n  calificacionGlobal: number = 0;\nid = '';\n\nifcoment:boolean = false;\n  constructor(private postSvc: ProductService,\n    private carritoSvc: CarritoService,\n    private authSvc: AuthService,\n    private router: Router,private firestore: AuthCrudService,\n    private comentSvc: ComentProductService\n      ) { \n\n        \n\n\n        this.products$ = this.postSvc.getAllPosts();\n\n        this.users$ = firestore.getUsers();\n\n        \n        this.pedidos$ = firestore.getPedidosAll();\n\n\n       \n\n\n\n\n            \n    \n}\n  \n\n  \n\n  ngOnInit(): void {\n\n\n \n this.userActive();\n\nthis.postSvc.getAllPosts().subscribe(res => console.log('POSTS',res));\nthis.users$.subscribe(res => console.log('users->', res));\nthis.pedidos$.subscribe(res => console.log('pedidos->', res));\n\nthis.contador = 0;\n\n\nthis.comprobarUserComment();\n  }\n\n\n\n\n\n  \n\n   addCarrito(product: Product){\n\n  \n    this.carritoSvc.addProduct(product);\n}\n\ncomprobarUserComment(){\n\n  this.productos = [];\nthis.vector = [];\n\n  this.authSvc.afAuth.user.subscribe(user => {\n\n    if(user){\n    const path = `clientes/${user.uid}/pedidos`;    \n    this.product$ = this.firestore.getPedidos(path);\n   \n       \n   this.product$.subscribe(pedidos => {\n\n\n    for (let index = 0; index < pedidos.length; index++) {\n      \n  \n        for (let index1 = 0; index1 < pedidos[index].productos.length; index1++) {\n\n          const nombre = pedidos[index].productos[index1].producto.tipo_producto;\n\n           this.vector.push(nombre);\n\n           \n            \n              }\n      \n    }\n\n\n    for (let index = 0; index < this.vector.length; index++) {\n   \n      for (let index1 = 1+index; index1 <=this.vector.length; index1++) {\n  \n        if(this.vector[index] == this.vector[index1]){\n  \n          this.vector[index1] = '';\n        }\n      } \n  \n       \n      }\n  \n     \n\n    this.vector.find( producto => {\n\n      if(producto != ''){\n\n        this.productos.push(producto);\n        \n        \n  \n        \n  \n      }\n    });\n\n\n  \n  \n  \n  \n  });\n\n    }\n});\n    \n}\nproductoComent(producto: Product){\n\n  this.comentSvc.setProduct(producto);\n\n  \n}\n\n\n\n\n\n\n   userActive(){\n\n\n  \n    this.authSvc.afAuth.user.subscribe(res1 => {\n  \n    \n  \n      if(res1 == null){\n  \n      this.admin = false;\n\n      return;\n        \n        \n      }else{\n        this.comprobarUser(res1.uid);\n      }\n\n    });\n   \n  }\n\n\n  comprobarUser(id: string){\n\n  \n    const path = 'clientes';\n\n    this.firestore.getDoc<User>(path, id).subscribe(user => {\n  \n        if(user){\n  \n        this.admin = true;\n  \n          \n        }else{\n  \n          this.admin = false;\n  \n        }\n         \n        \n  \n        \n      });\n        \n      \n  \n      }\n\n\n \n      comprobarDomici(id: string){\n\n  \n        const path = 'domiciliarios';\n        this.firestore.getDoc<Domiciliario>(path,id).subscribe(domici => {\n  \n        if(id == domici.id ){\n  \n        this.admin = true;\n  \n          \n        }else{\n  \n          this.admin = false;\n  \n        }\n         \n        });\n  \n        \n        \n        \n      \n  \n      }\n\n\n \n\n\n\n\n  }\n\n\n\n\n\n","\n       \n <br>\n \n<mat-card class=\"ancho\">\n\n<div class=\"container\" *ngIf=\"products$  | async as products; else loading\" >\n   \n\n\n \n\n      \n   \n\n    <mat-card class=\"post-card\"  *ngFor=\"let product of products \">\n\n\n\n\n        \n        <mat-card class=\"dimension\">\n\n\n    <mat-card-header>\n\n\n\n\n    \n            \n            {{product.tipo_producto}}\n\n \n        \n               \n\n           \n\n       \n             \n       \n          \n        </mat-card-header >\n\n        \n\n\n        &nbsp;\n        &nbsp;\n        <img   matCardImage   [src]=\"product.image\" />\n        <mat-card-content>\n         <p>\n    \n            {{ product.nombre }}\n         </p>\n\n          \n\n         <p style=\"background: cornsilk;\">\n    \n            {{ product.valor }}\n\n            \n         </p>\n\n\n        \n         <div *ngIf=\"admin\">\n\n            <button   (click)=\"addCarrito(product)\"  class=\"btn-flotante\" >a√±adir al carrito</button>\n         \n        </div>\n        \n         \n    \n    <div *ngFor=\"let producto of productos\">\n        \n       \n   <div *ngIf=\"product.tipo_producto == producto\"> \n       \n        <p>\n            <span routerLink=\"/comentarios\" (click)=\"productoComent(product)\" class=\"material-icons\">\n                comment\n            </span>\n\n            \n      </p>\n        \n         </div> \n    \n    </div>\n\n\n        \n\n        \n        \n      \n         &nbsp;\n         &nbsp;\n\n       \n        \n\n\n\n      \n        </mat-card-content>&nbsp;\n     \n    </mat-card> \n        <mat-divider></mat-divider>\n\n      \n\n    </mat-card>\n\n\n    </div>\n\n</mat-card>\n    <ng-template #loading>\n    <div class=\"container-spinner\">\n    \n        <mat-spinner></mat-spinner>\n    </div>\n        \n    \n    </ng-template>\n"],"sourceRoot":"webpack:///"}